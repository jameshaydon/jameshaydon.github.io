<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>James Haydon - programming</title>
    <link rel="self" type="application/atom+xml" href="https://jameshaydon.github.io/categories/programming/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://jameshaydon.github.io/"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2025-06-27T00:00:00+00:00</updated>
    <id>https://jameshaydon.github.io/categories/programming/atom.xml</id>
    <entry xml:lang="en">
        <title>Solving `Passport Application` with Haskell</title>
        <published>2025-06-27T00:00:00+00:00</published>
        <updated>2025-06-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://jameshaydon.github.io/passport/"/>
        <id>https://jameshaydon.github.io/passport/</id>
        
        <content type="html" xml:base="https://jameshaydon.github.io/passport/">&lt;p&gt;There&#x27;s a trend at the moment of &lt;a href=&quot;https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=44363696&quot;&gt;solving&lt;&#x2F;a&gt; online &lt;a href=&quot;https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=44273489&quot;&gt;games&lt;&#x2F;a&gt; with &lt;a href=&quot;https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=44259476&quot;&gt;programming&lt;&#x2F;a&gt;, let&#x27;s do one from the UK called &lt;em&gt;Passport Application&lt;&#x2F;em&gt;, which is developed by &lt;a href=&quot;https:&#x2F;&#x2F;www.gov.uk&#x2F;government&#x2F;organisations&#x2F;hm-passport-office&quot;&gt;&quot;His Majesty&#x27;s Passport Office&quot;&lt;&#x2F;a&gt; or HMPO. It&#x27;s a cultural phenomenon in the UK: despite being quite expensive (about £100 just to start) for the standard online version (a masterpiece of minimalist design, entirely text-based), most British people have played the game.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s an adventure puzzle document collection game. The premise is to collect enough artefacts, scattered throughout various bureaucratic institutions in the world, until you can prove the statement &quot;Applicant is British&quot; according to an extremely complex set of rules, written in arcane language, in various documents called &quot;acts of parliament&quot;. The prize for winning is a little booklet with a date inside that indicates when you can play again.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;Hardcore players, opt for an entirely paper-based version that relies entirely on postal mail. The puzzle-sheets for that look like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;jameshaydon.github.io&#x2F;passport&#x2F;paper-form.png&quot; alt=&quot;UK Passport Application paper form&quot; title=&quot;Paper Form&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;There are various instructions for what collectibles need to be gathered, presented in game instruction manuals such as:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;jameshaydon.github.io&#x2F;passport&#x2F;docs-table.jpg&quot; alt=&quot;Documents Table&quot; title=&quot;Documents Table&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The game starts easy enough, you just need to enter basic facts about the applicant, and take a photo of them. But things get tougher from there, with various side-quests, all designed to be fun:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;HMPO sometimes decides to send you an an &quot;identity confirmation&quot; side quest. This involves finding someone whose job&#x2F;status is one of a finite list, things like &quot;accountant&quot; or &quot;civil servant&quot;, but also have some more interesting items like &quot;chiropodist&quot;, &quot;funeral director&quot; and &quot;airline pilot&quot;. Once you&#x27;ve managed to track down such a person, preferably one who knows you, you must socially engineer them into filling in some webforms.&lt;&#x2F;li&gt;
&lt;li&gt;The main mechanic of the game involves sending in &quot;original&quot; documents. Documents that are not in english need to be paired with an &quot;officially certified translation&quot;, which triggered some cool side-quests in my case like &quot;how to get a certified translation of a French wedding certificate, which is in my possession in Japan, and have both sent to HMPO by mail&quot;.&lt;&#x2F;li&gt;
&lt;li&gt;Some documents relate to family members, and so you need to start getting the whole family involved in a co-op mode.&lt;&#x2F;li&gt;
&lt;li&gt;And of course the bureaucratic institutions you must request some documents from have their own arcane gameplay.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;All this keeps the game interesting and fun at all time, taking weeks and sometimes months to complete. Non-british people aren&#x27;t really supposed to play, but seeing as proving britishness is the whole object of the game, the game is actually open to anyone in the world! I thoroughly encourage you to give it a go.&lt;&#x2F;p&gt;
&lt;p&gt;So this time I was playing on behalf of my daughter, because I&#x27;d already completed the game recently, and besides she&#x27;s too young to play on her own. I chose the &quot;first child passport from abroad&quot; difficulty level, so expected it to be quite challenging from the outset. After a round of waiting (games can take weeks), the first round of document requests came through.
Quite a lot of documents, most of which seemed quite unrelated to the main objective, but that&#x27;s the game. I started collecting them but some were quite difficult to obtain so I decided to use the chat feature. You see your game is handled by a person called an &quot;examiner&quot;, they are the ones who send you on document gathering quests, according to their interpretation of the rules. To add an extra layer of difficulty, you can&#x27;t directly communicate with this person, you can only talk to &quot;advice agents&quot; using a chat or telephone service. These agents offer advice on side-quests, but nothing they say is official. They can pass along questions to the examiner, but that triggers a few days of waiting time, sometimes up to 10 days in my case, a tactic used to build suspense.&lt;&#x2F;p&gt;
&lt;p&gt;Quite quickly the chat service told me that 75% of the initial documents requested were unnecessary; it was all just a misdirection! So another round of waiting, and then more document requests. You get document requests via emails like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;jameshaydon.github.io&#x2F;passport&#x2F;doc-request-email.png&quot; alt=&quot;Document Request&quot; title=&quot;Dcument Request Email&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The document requests are paired with some cryptic explanations that are somewhat helpful but still vague enough to keep the game interesting. Why don&#x27;t I have parental responsibility for &lt;code&gt;__APPLICANT_NAME__&lt;&#x2F;code&gt;? One of the listed condition is &quot;named on the child&#x27;s birth certificate**, which I am, and was already sent to them, along with the Japanese→English translation. Maybe they also need proof of the first condition, despite the second, and despite this document not having been requested earlier in the process. Or maybe some automated system has messed up because the broken templating makes it look like maybe &lt;code&gt;APPLICANT_NAME == NULL&lt;&#x2F;code&gt; in some database, who knows.&lt;&#x2F;p&gt;
&lt;p&gt;Another round of document requests, one for a document that doesn&#x27;t exist, another round of helpline. More explorations of conversation trees with NPCs, an alternative path to the goal is found, more documents. This culminated in a rare relic request:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;&quot;Applicant&#x27;s Paternal great-grandfather&#x27;s birth certificate and marriage certificate&quot;&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;One of these is almost 100 years old. Of course &lt;code&gt;applicant&#x27;s Paternal great grandfather&lt;&#x2F;code&gt; is ambiguous, since most people have 2 of them, but this is standard misdirection at this point and all part of the fun. After decrypting this to &lt;code&gt;applicant&#x27;s father&#x27;s father&#x27;s father&#x27;s birth certificate&lt;&#x2F;code&gt; I started to wonder why such a distant document would be requested. Engaging the advice agents didn&#x27;t help much, they would launch into explanations as to why
$\text{birthCirt}(\text{father}^2(\text{applicant}))$ was needed even though this document was already in their possession, and I was asking about
$\text{birthCirt}(\text{father}^3(\text{applicant}))$. One admitted they didn&#x27;t know why the request was being made.&lt;&#x2F;p&gt;
&lt;p&gt;So what&#x27;s going on here? It&#x27;s important to understand the sort of logic used by HMPO in &lt;em&gt;Passport Application&lt;&#x2F;em&gt; game. It&#x27;s called &lt;strong&gt;Bureaucratic Logic&lt;&#x2F;strong&gt;, it derives from &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Constructive_logic&quot;&gt;Constructive Logic&lt;&#x2F;a&gt;, in that one cannot just make valid arguments, no, one has to construct proofs of a particular nature to back them up. Constructive logic has witnesses, Bureaucratic logic has original documents.&lt;&#x2F;p&gt;
&lt;p&gt;For example, like constructive logic, HMPO doesn&#x27;t allow you to use exclusive middle: $P \lor \lnot P$ ($P$ or not $P$) is not in general valid. The gameplay of &lt;em&gt;PassportApplication&lt;&#x2F;em&gt; is greatly influence by answers to some questions like &quot;was applicant&#x27;s father&#x27;s father born in the UK or not born in the UK?&quot; But you can&#x27;t just say &quot;yes one of those is true&quot; and provide documents for both subsequent branches of the triggered rules, even if you can. No no, that would be using exclusive middle. You &lt;em&gt;must&lt;&#x2F;em&gt; commit to one alternative &lt;em&gt;and&lt;&#x2F;em&gt; provide a document for that. This is were it&#x27;s important to remember that it&#x27;s not about actually demonstrating citizenship, for which exclusive middle would be a perfectly valid argument, &lt;em&gt;PassportApplication&lt;&#x2F;em&gt; is about having fun gatherng documents. Don&#x27;t question the rules too much or you&#x27;ll stop having fun.&lt;&#x2F;p&gt;
&lt;p&gt;The second piece of the puzzle is in guidance such as:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;British passports are issued to those who have a claim to British nationality under the British Nationality Act 1981. This is decided mainly by a person’s place and date of birth and their parents’ places and dates of birth. A person born outside of the UK after 31 December 1982 is normally a British citizen only if, at the time of their birth one parent is a British citizen otherwise than by descent, such as through birth in the UK or registration or naturalisation as a British citizen.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Note that the Britishness of a person can be dependent on the Britishness of their parents. The final peice of the puzzle is that HMPO doesn&#x27;t trust it&#x27;s own passports to prove Britishness. This is the mechanic which, in some cases, kicks off recursive document request up the family tree, until a base case is reached. What are the base cases? A base case is an ancestor who&#x27;s Britishness &lt;em&gt;does not&lt;&#x2F;em&gt; depend on a parent, e.g. someone who was naturalised, or born in the UK before 1983 (which makes one unconditionally british regardless of parents). That&#x27;s right, further into the future we get from 1983, the taller these call-stacks can get. Fun!&lt;&#x2F;p&gt;
&lt;p&gt;At this point I did what any sane person would do, I reached for a logic programming language and decided to encode the rules in the hope of figuring out what was going on. Is it possible to write some code which could have produced the list of required documents upfront, with no confusion, and perfect explanations? Of course this would ruin all the fun of the game, but let&#x27;s forge ahead.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;haskell-code&quot;&gt;Haskell code&lt;&#x2F;h2&gt;
&lt;p&gt;I considered using Datalog or Prolog, but was not comfortable enough to get it working quite like I wanted, so reached for Haskell&#x27;s &lt;code&gt;LogicT&lt;&#x2F;code&gt; monad instead. The basic goal here is to produce the full list of documents required for the application. But this isn&#x27;t quite right actually. Because there are several ways one can claim britishness, there are several sets of documents that can work, and you only need one of them. So really one is looking for a function that returns &lt;code&gt;Set (Set Document)&lt;&#x2F;code&gt;, where&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Parent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Mother &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Father
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;deriving&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Eq&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Ord&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Person &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Applicant &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Parent Parent Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;deriving&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Eq&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Ord&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Document
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BirthCertificate Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;MarriageCertificate Person Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;NaturalizationCertificate Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Passport Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- more documents
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;deriving&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Eq&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Ord&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But this is also unsatisfying, because you want to know &lt;em&gt;why&lt;&#x2F;em&gt; a certain document set is enough. Indeed that&#x27;s what I was initially confused about, why certain documents are needed. So this is really a proof-search problem, and we proceed in two stages:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;we use &lt;code&gt;LogicT&lt;&#x2F;code&gt; to enumerate all the &lt;code&gt;Proof&lt;&#x2F;code&gt;s of britishness of the applicant, given some information about them, and&lt;&#x2F;li&gt;
&lt;li&gt;for each &lt;code&gt;Proof&lt;&#x2F;code&gt; we compute what is the &lt;code&gt;Set Document&lt;&#x2F;code&gt; that is needed to satisfy that proof.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;So we define a proof type:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- Deriving britishness via a parent, and their proof of britishness
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;ViaParent Person Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- Britishness via two claims.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;And Proof Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- Foundational evidence.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Evidence Predicate
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;deriving&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This type could be made much more complex, detailing each rule taken, but this simpler type was at least enough for my purposes. One of the aspects of the code I wanted was that one would not need to provide all the information upfront, instead questions would be asked interactively. Furthermore, previous facts should be retained and used for all branches, backtracking, etc. So we use this monad stack:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;type &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Claims &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Set Predicate
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;type &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;M&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; a &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;LogicT&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;StateT Claims IO&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;) a
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here &lt;code&gt;Predicate&lt;&#x2F;code&gt; are the sorts of things that are true of a person and affect how the rules play out:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Predicate
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;IsBritish Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Settled Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornBefore Int Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornInUK Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornAfter Int Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Naturalized Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Years3LivingInUK Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;IsBritOtbd Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Married Person Person
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;deriving&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Eq&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;Ord&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here is then the root function for Britishness:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- | Is a person british?
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;brit &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;brit p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    check (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;IsBritish&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    byBirth &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;|&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; naturalised
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;where
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    byBirth &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      ifThenElse
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;        (evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornInUK&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p))
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;        (britBornInUk p)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;        (britBornAbroad p)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    naturalised &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Naturalised&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;check&lt;&#x2F;code&gt; function here interacts with the user, to avoid launching into an investigation if the user knows that person is not british.&lt;&#x2F;p&gt;
&lt;p&gt;A person is brit either &lt;code&gt;byBirth&lt;&#x2F;code&gt; or &lt;code&gt;naturalised&lt;&#x2F;code&gt;. Naturalisation is the simplest, as this certificate is then the sole document needed. Britishness by birth forks mainly on whether or not the person was born in the UK, and we go to sub-routines.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- | UK-born citizenship (pre-1983 or via parent)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;britBornInUk &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;britBornInUk p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornBefore 1983&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;orElse&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; britBornInUkViaParent p
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- | UK-born citizenship via parent (used for post-1983 births)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;britBornInUkViaParent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;britBornInUkViaParent p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; viaParent p (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;parent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; brit parent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;orElse&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; settled parent)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;People born in the UK before &lt;code&gt;1983&lt;&#x2F;code&gt; are a base case, they are unconditionally british. Otherwise they acquire it via at least one their parents, who must be either british themselves or &quot;settled&quot; at time of birth. The &lt;code&gt;orElse&lt;&#x2F;code&gt; function here is similar to &lt;code&gt;&amp;lt;|&amp;gt;&lt;&#x2F;code&gt;, but won&#x27;t include any proofs from the second branch at all if the first is successful. E.g. if &lt;code&gt;brit parent&lt;&#x2F;code&gt; then &lt;code&gt;settled parent&lt;&#x2F;code&gt; doesn&#x27;t apply: there is no notion of &quot;settled&quot; for british people.&lt;&#x2F;p&gt;
&lt;p&gt;When not born in the UK things are more complex:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- | British citizenship for those born abroad
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;britBornAbroad &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;britBornAbroad p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  viaParent p britOtbd
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;orElse&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; viaParent p (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;\&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;parent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; and (brit parent) (evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Years3LivingInUK&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; parent)))
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;-- | British otherwise than by descent (BOTD)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;britOtbd &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;britOtbd p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  abortIfNo (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;IsBritOtbd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;$
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    britOtbdUkBorn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;|&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Naturalised&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;|&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; bornCrownService p
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;where
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    britOtbdUkBorn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; and (evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornInUK&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p)) (britBornInUk p)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;bornCrownService &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;bornCrownService p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; viaParent p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;$ \&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;parent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  check (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CrownService&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; parent)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  and (brit parent) (evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CrownService&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; parent))
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When not born in the UK, you get citizenship from your parents in the usual way only if there is evidence of 3 years of living in the UK (there are more conditions I couldn&#x27;t be bothered to codify, they didn&#x27;t apply to my case), or if born from a person that is &lt;em&gt;British otherwise than by descent&lt;&#x2F;em&gt; (BOTBD). This is a person with &quot;super britishness&quot;, they can confer citizenship to their children unconditionally (well, apart from having to play hard games of &lt;code&gt;PassportApplication&lt;&#x2F;code&gt;). The basic idea is that you didn&#x27;t become british purely based on a parent. E.g. you were naturalised, or born in the UK, etc. There are &lt;em&gt;many&lt;&#x2F;em&gt; edge-cases in the rules, and I&#x27;ve only coded those that are most relevant to my case. One of them is &lt;code&gt;bornCrownService&lt;&#x2F;code&gt;, this says that one is still BOTBD if born abroad &lt;em&gt;because a parent was working in &quot;Crown Service&quot;&lt;&#x2F;em&gt;, e.g. in an embassy. This happens to be the case of $\text{birthCirt}(\text{father}^3(\text{applicant}))$, but is this relevant? We&#x27;ll have to wait till we&#x27;ve coded enough to run this program.&lt;&#x2F;p&gt;
&lt;p&gt;A lot of these function rely on a higher order function &lt;code&gt;viaParent&lt;&#x2F;code&gt;, which mediates how citizenship is passed down:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haskell&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-haskell &quot;&gt;&lt;code class=&quot;language-haskell&quot; data-lang=&quot;haskell&quot;&gt;&lt;span style=&quot;color:#5cb3fa;&quot;&gt;viaParent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;:: Person -&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;Person -&amp;gt; M Proof&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;-&amp;gt; M Proof
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;viaParent p cond &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  go &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Mother
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;|&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; ifThenElse
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      (evidence (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;BornAfter 2006&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p))
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      (go &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Father&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      (and (married (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Parent Father&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p) (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Parent Mother&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; p)) (go &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Father&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;))
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;where
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    go parent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;ViaParent&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Parent&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; parent p) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;$&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; cond (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;Parent&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; parent p)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This takes a person, and a &lt;code&gt;cond&lt;&#x2F;code&gt;ition for a parent, and provides a proof for something for the applicant as long as &lt;code&gt;cond&lt;&#x2F;code&gt; can be proved for the parent. There is an a complication here relating to laws surrounding &quot;illegitimate&quot; children born before 2006, so an extra check for marriage is required in some cases. There are ways around this not codified here (&quot;registration&quot;). There are other sexist clauses about only fathers passing on Britishness in some cases, that I also haven&#x27;t codified here. It&#x27;s interesting that even though some of these laws no longer apply, they apply &lt;em&gt;historically&lt;&#x2F;em&gt; when trying to work out if an ancestor was british. That&#x27;s right, to play &lt;code&gt;PassportApplication&lt;&#x2F;code&gt; you need to consult laws from many different times!&lt;&#x2F;p&gt;
&lt;p&gt;To run the code we &lt;code&gt;evalStateT (observeAllT m) Set.empty&lt;&#x2F;code&gt;, the &lt;code&gt;Set.empty&lt;&#x2F;code&gt; indicating we start with no evidence. Once a proof has been found we use &lt;code&gt;docs :: Proof -&amp;gt; Logic (Set Document)&lt;&#x2F;code&gt; to produce the needed documents for &lt;em&gt;that path&lt;&#x2F;em&gt; to citizenship. This will mostly list out documents for foundational evidence, and e.g. make sure that when &lt;code&gt;ViaParent&lt;&#x2F;code&gt; is used, a birth certificate linking parent and child is produced.&lt;&#x2F;p&gt;
&lt;p&gt;Let&#x27;s run it!&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;ghci&amp;gt; run (brit Applicant)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant is british
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Mother is british otherwise than by descent
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant was born after 2006
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father is british otherwise than by descent
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father was born before 1983
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father&amp;#39;s Mother is british
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father&amp;#39;s Mother was settled at time of birth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father was born after 2006
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father&amp;#39;s Father was married to Applicant&amp;#39;s Father&amp;#39;s Mother at time of birth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;? : Applicant&amp;#39;s Father&amp;#39;s Father is british
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This goes on for quite some questions, 37 in my case. You can answer question like &lt;code&gt;Applicant&#x27;s Mother is british otherwise than by descent&lt;&#x2F;code&gt; with &quot;dk&quot; (don&#x27;t know), and in this case it will explore the tree for you, the main use is &lt;em&gt;not&lt;&#x2F;em&gt; exploring this branch if you do know it is futile.&lt;&#x2F;p&gt;
&lt;p&gt;The &quot;Crown Service&quot; status of $\text{birthCirt}(\text{father}^3(\text{applicant}))$ caused quite some confusion in my case, because $\text{birthCirt}(\text{father}^2(\text{applicant}))$ was indeed born abroad, causing some amount of recursion. But hilariously the crown service of $\text{birthCirt}(\text{father}^3(\text{applicant}))$ turns out to be totally irrelevant, indeed the BOTBD status of $\text{birthCirt}(\text{father}^1(\text{applicant}))$ is already derived from being born in the UK.&lt;&#x2F;p&gt;
&lt;p&gt;Once all the citizenship proofs are produced, they are printed and possible document sets are produced:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Applicant has 3 proof(s) of britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;-----------
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Proof 1:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• Applicant was born after 2006
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• Via Applicant&amp;#39;s Father&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    • Applicant&amp;#39;s Father was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    • Via Applicant&amp;#39;s Father&amp;#39;s Mother&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;        Applicant&amp;#39;s Father&amp;#39;s Mother was settled at time of birth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Possible doc sets:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• - Birth certificate for Applicant,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Settled status document for Applicant&amp;#39;s Father&amp;#39;s Mother
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;-----------
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Proof 2:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• Applicant was born after 2006
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• Via Applicant&amp;#39;s Father&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    • Applicant&amp;#39;s Father was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    • • Applicant&amp;#39;s Father&amp;#39;s Father was married to Applicant&amp;#39;s Father&amp;#39;s Mother at time of birth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      • Via Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;          Via Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Mother&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;            • Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Mother was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;            • Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Mother was born before 1983
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Possible doc sets:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• - Birth certificate for Applicant,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Mother,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father&amp;#39;s Father,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Marriage certificate for Applicant&amp;#39;s Father&amp;#39;s Father and Applicant&amp;#39;s Father&amp;#39;s Mother
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;-----------
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Proof 3:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• Applicant was born after 2006
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• Via Applicant&amp;#39;s Father&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    • Applicant&amp;#39;s Father was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    • • Applicant&amp;#39;s Father&amp;#39;s Father was married to Applicant&amp;#39;s Father&amp;#39;s Mother at time of birth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;      • Via Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;          • Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father was married to Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Mother at time of birth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;          • Via Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father&amp;#39;s britishness:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;              • Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father was born in UK
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;              • Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father was born before 1983
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Possible doc sets:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;• - Birth certificate for Applicant,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father&amp;#39;s Father,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Birth certificate for Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Marriage certificate for Applicant&amp;#39;s Father&amp;#39;s Father and Applicant&amp;#39;s Father&amp;#39;s Mother,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;  - Marriage certificate for Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father and Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Mother
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And there is it, in &lt;code&gt;Proof 3&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Birth certificate for Applicant&amp;#39;s Father&amp;#39;s Father&amp;#39;s Father
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Interestingly, the proof that HMPO has selected for my case is the longest and most complex of the 3, I assume that when there are several choices they send the player down the most complex one. Indeed &lt;code&gt;Proof 1&lt;&#x2F;code&gt; is quite simple, it requires only proving a settled status of one ancestor &lt;em&gt;and that&#x27;s it&lt;&#x2F;em&gt;. Nationality via &lt;em&gt;non-british&lt;&#x2F;em&gt; ancestors is often much simpler, because these cases are non-recursive. &lt;code&gt;Proof 2&lt;&#x2F;code&gt; is also slightly more optimized, because it relies on &lt;code&gt;Birth certificate for Applicant&#x27;s Father&#x27;s Father&#x27;s Mother&lt;&#x2F;code&gt;, which therefore bypasses the need for a marriage certificate, needed in &lt;code&gt;Proof 3&lt;&#x2F;code&gt; to prove &quot;legitimacy&quot; of &lt;code&gt;Applicant&#x27;s Father&#x27;s Father&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Proofs relying on britishness bottom out when reaching a person born before 1983 in the UK, the further we get from this date, the longer the proofs become. This applies, at least in theory, &lt;em&gt;even when everyone involvd is born in the UK&lt;&#x2F;em&gt;. In practice this doesn&#x27;t apply because HMPO doesn&#x27;t actually apply the laws as written in the act, they have their own guidance documents, and act using the principle of &lt;a href=&quot;https:&#x2F;&#x2F;www.gov.uk&#x2F;government&#x2F;publications&#x2F;balance-of-probabilities&#x2F;balance-of-probabilities-accessible&quot;&gt;balance of probabilities&lt;&#x2F;a&gt;, and there seems to be guidance indicating that for standard applications from the UK for people born in the UK, one can use &quot;Main Index&quot; (their internal passport database). So you have to play on &quot;hard mode&quot;, e.g. birth abroad, which apparently makes &lt;em&gt;all recursive calls&lt;&#x2F;em&gt; not allowed to use &quot;Main Index&quot;.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;I&#x27;ve still not finished my current game of PassportApplication, I&#x27;m trying to get through proofs 2 and 3 simultaneously, and failing that will try proof 1.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Domain structured programming (UK ATC meltdown)</title>
        <published>2023-09-15T00:00:00+00:00</published>
        <updated>2023-09-15T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://jameshaydon.github.io/programming-style-and-bugs/"/>
        <id>https://jameshaydon.github.io/programming-style-and-bugs/</id>
        
        <summary type="html">&lt;p&gt;This is part 3 of my blog posts about the UK air traffic control meltdown. You
might want to read &lt;a href=&quot;&#x2F;nats-fail&quot;&gt;part one&lt;&#x2F;a&gt; and &lt;a href=&quot;&#x2F;what-went-wrong&quot;&gt;part two&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Having had some time to process some of the comments about my first post, I
realise now that I was not clear in communicating my thoughts about the
programming style, and how that contributed to the existence of the bug. I will
have another go now. The point I was trying to make was:&lt;&#x2F;p&gt;
&lt;p&gt;With a better programming style, the bug might not have been made &lt;strong&gt;even if the
code is only meant for flight plans with no duplicate waypoints&lt;&#x2F;strong&gt;.&amp;hellip;
&lt;&#x2F;p&gt;
</summary>
        
    </entry>
    <entry xml:lang="en">
        <title>UK ATC meltdown and swiss cheese</title>
        <published>2023-09-13T00:00:00+00:00</published>
        <updated>2023-09-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://jameshaydon.github.io/what-went-wrong/"/>
        <id>https://jameshaydon.github.io/what-went-wrong/</id>
        
        <summary type="html">&lt;p&gt;This is a short follow-up of my post about the UK air traffic control meltdown.
You might want to first read &lt;a href=&quot;&#x2F;nats-fail&quot;&gt;part one&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;So my first post got a lot of attention, and that generates a
&lt;a href=&quot;https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;programming&#x2F;comments&#x2F;16fhmuq&#x2F;a_deep_dive_into_the_bug_that_caused_the_uk_air&#x2F;?utm_source=share&amp;amp;utm_medium=web2x&amp;amp;context=3&quot;&gt;lot&lt;&#x2F;a&gt;
of &lt;a href=&quot;https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37461695&quot;&gt;comments&lt;&#x2F;a&gt;. What was most
discussed was:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;&quot;But really though, what was the one thing that went wrong?&quot;&lt;&#x2F;em&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;</summary>
        
    </entry>
    <entry xml:lang="en">
        <title>UK air traffic control meltdown</title>
        <published>2023-09-08T00:00:00+00:00</published>
        <updated>2023-09-08T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://jameshaydon.github.io/nats-fail/"/>
        <id>https://jameshaydon.github.io/nats-fail/</id>
        
        <summary type="html">&lt;p&gt;Comments on &lt;a href=&quot;https:&#x2F;&#x2F;www.reddit.com&#x2F;r&#x2F;programming&#x2F;comments&#x2F;16fhmuq&#x2F;a_deep_dive_into_the_bug_that_caused_the_uk_air&#x2F;?utm_source=share&amp;amp;utm_medium=web2x&amp;amp;context=3&quot;&gt;reddit&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37461695&quot;&gt;Hacker News&lt;&#x2F;a&gt;. Other posts: &lt;a href=&quot;&#x2F;what-went-wrong&quot;&gt;part two&lt;&#x2F;a&gt; and &lt;a href=&quot;&#x2F;programming-style-and-bugs&quot;&gt;part
three&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;UPDATE:&lt;&#x2F;em&gt; The flight plan which triggered the chaos (but was valid) has been
&lt;a href=&quot;https:&#x2F;&#x2F;chaos.social&#x2F;@russss&#x2F;111048524540643971&quot;&gt;identified&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;On 28 August 2023 &lt;em&gt;NATS&lt;&#x2F;em&gt;, the UK&#x27;s air traffic control operator, suffered a
&lt;strong&gt;major&lt;&#x2F;strong&gt; technical incident. The BBC reports that more than &lt;a href=&quot;https:&#x2F;&#x2F;www.bbc.com&#x2F;news&#x2F;uk-66685349&quot;&gt;2000 flights were
cancelled&lt;&#x2F;a&gt; and the cost has been estimated
at over &lt;em&gt;£100 million&lt;&#x2F;em&gt; GBP. The incident probably affected hundreds of thousands
of people.&lt;&#x2F;p&gt;
&lt;p&gt;The press initially reported the cause was a faulty flight plan: &lt;em&gt;&quot;UK air traffic
control: inquiry into whether French error caused failure&quot;&lt;&#x2F;em&gt; (The Times) and in
typical &lt;em&gt;Mail Online&lt;&#x2F;em&gt; reporting style: &lt;em&gt;&quot;Did blunder by French airline spark air
traffic control issues? Officials probe if a single badly filed travel plan
caused UK&#x27;s entire flight-control system to collapse in worst outage for a
decade - with 1,000 flights cancelled and chaos set to last DAYS&quot;&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;So what happened? These are notes on my reading of the incident report:&lt;&#x2F;p&gt;</summary>
        
    </entry>
    <entry xml:lang="en">
        <title>Why (some) Python programmers don&#x27;t want Haskell</title>
        <published>2023-07-16T00:00:00+00:00</published>
        <updated>2023-07-16T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://jameshaydon.github.io/why-python-not-haskell/"/>
        <id>https://jameshaydon.github.io/why-python-not-haskell/</id>
        
        <summary type="html">&lt;p&gt;A &lt;a href=&quot;https:&#x2F;&#x2F;discourse.haskell.org&#x2F;t&#x2F;commercial-haskell-should-go-after-python-julia-not-rust&#x2F;6964&#x2F;2&quot;&gt;Haskell discourse
thread&lt;&#x2F;a&gt;
asks why more Python developers couldn&#x27;t instead be using Haskell.&lt;&#x2F;p&gt;
&lt;p&gt;One of the points made in this thread, is that there is a sizeable class of Python programmers for which the trope &quot;Python programmers will be scared of monads!&quot; doesn&#x27;t apply. I thought I would ask some of the people I know that use Python why they don&#x27;t use Haskell.&lt;&#x2F;p&gt;</summary>
        
    </entry>
</feed>
